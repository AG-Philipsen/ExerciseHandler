%__BEGIN_PACKAGES__%
\usepackage{xifthen}
\usepackage{xargs}
%__END_PACKAGES__%

\newlength{\myskip}
\setlength{\myskip}{6mm plus 1mm minus 1mm}

\newcommand{\PrintTutorList}{
    \newboolean{tutorsToBePrinted}                 % xifthen package
    \setboolean{tutorsToBePrinted}{true}           % xifthen package
    \newcounter{Tutor}
    \whiledo{\boolean{tutorsToBePrinted}}{         % xifthen package
        \refstepcounter{Tutor}
        \checkTutor(\theTutor)                     % arrayjob package
        \ifemptydata                               % arrayjob package
            \setboolean{tutorsToBePrinted}{false}  % xifthen package
        \else
            \centerline{
                \textsc{\Tutor(\theTutor):}
                \texttt{\TutorMail(\theTutor)}
            }
        \fi
    }
}

\newcommand{\Heading}{
    \centerline{\Large\scshape\lecture}%
    \vskip 2pt%
    \centerline{\scshape\semester~--~\professor}%
    \vskip 3pt%
    \hrule%
    \vskip 5pt%
    \PrintTutorList
    \vspace{\myskip}
}

\newcommandx{\Sheet}[2][1=, 2=]{
    \ifthenelse{\isempty{#1}}{
        \centerline{\Large\textbf{Exercise sheet}}
    }{
        \centerline{\Large\textbf{Exercise sheet #1}}
    }
    % Here we have to print as subtitle a string which is the concatenation
    % of \exerciseSheetSubtitlePrefix and #2, which could be empty or not in
    % all the possible combinations. So test them.
    \ifthenelse{\isempty{\exerciseSheetSubtitlePrefix}}{
        \ifthenelse{\isempty{#2}}{}{
            \centerline{\textit{#2}}
        }
    }{
        \ifthenelse{\isempty{#2}}{
            \centerline{\textit{\exerciseSheetSubtitlePrefix}}
        }{
            \centerline{\textit{\exerciseSheetSubtitlePrefix{} #2}}
        }
    }
    \vspace{2\myskip}
}

\newcounter{Exercise}
\newenvironment{exercise}[1][optional]
{
    \refstepcounter{Exercise}
    \ifthenelse{\isempty{#1}}{
        \noindent{\large\textbf{Exercise \theExercise}}\\[0.75ex]
    }{
        \noindent{\large\textbf{Exercise \theExercise}} $\;$[\textit{#1}]\\[0.75ex]
    }
}
{\par\vspace{\myskip}}
